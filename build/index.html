
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>SHOPPO GraphQL API</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
    <link href="stylesheets/zoom.css" rel="stylesheet" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#45fa4e00db" class="toc-h1 toc-link" data-title="介绍">介绍</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#29f5babee1" class="toc-h2 toc-link" data-title="接口地址">接口地址</a>
                  </li>
                  <li>
                    <a href="#post" class="toc-h2 toc-link" data-title="POST 请求">POST 请求</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#c81cfde5a6" class="toc-h1 toc-link" data-title="物流">物流</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#3bffba42a3" class="toc-h2 toc-link" data-title="流程图">流程图</a>
                  </li>
                  <li>
                    <a href="#d09a1c0983" class="toc-h2 toc-link" data-title="下载物流面单">下载物流面单</a>
                  </li>
                  <li>
                    <a href="#f21caf117f" class="toc-h2 toc-link" data-title="推送物流轨迹">推送物流轨迹</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li>© 2018 Dot Matrix Inc.</li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='45fa4e00db'>介绍</h1><h2 id='29f5babee1'>接口地址</h2>
<ul>
<li>Dev: <a href="https://graphql-dev.shoppo.com/api/wise">https://graphql-dev.shoppo.com/api/wise</a></li>
<li>Prod : <a href="https://graphql.shoppo.com/api/wise">https://graphql.shoppo.com/api/wise</a></li>
<li>调用方式: <code>https</code></li>
<li>编码格式: <code>utf-8</code></li>
<li>接口验证: <code>accesstoken</code></li>
<li>测试环境 <code>accesstoken</code>: <code>6146211cb3c54a5999b78f4df1f88b63</code></li>
</ul>

<blockquote>
<p>curl请求(get)</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="nv">$ </span>curl <span class="nt">-s</span> https://graphql-dev.shoppo.com/api/wise/health_check <span class="nt">-H</span> <span class="s2">"accesstoken: &lt;Your access token&gt;"</span>
</code></pre></div>
<blockquote>
<p>调用成功</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="err">Go</span><span class="w"> </span><span class="err">Shoppo</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>调用失败</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"display_to_user"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unauthorized request"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AccessDenied"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id='post'>POST 请求</h2>
<ul>
<li>content-type: <code>application/json</code></li>
<li>requst-body: <code>json</code> 字符串</li>
<li>返回结果: <code>json</code></li>
</ul>
<h1 id='c81cfde5a6'>物流</h1><h2 id='3bffba42a3'>流程图</h2>
<p><img src="images/wise.png" alt="Wise" /></p>
<h2 id='d09a1c0983'>下载物流面单</h2><h3 id='api-wise-logistics-stamp'><code>/api/wise/logistics/stamp</code></h3>
<ul>
<li>传商品信息，称重数据返回物流面单</li>
<li>请求方式: <code>POST</code></li>
</ul>

<blockquote>
<p>curl请求</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="nv">$ </span>curl https://graphql-dev.shoppo.com/api/wise/logistics/stamp <span class="nt">-H</span> <span class="s2">"Content-Type:application/json"</span> <span class="nt">-H</span> <span class="s2">"accesstoken: 6146211cb3c54a5999b78f4df1f88b63"</span> <span class="nt">-X</span> POST <span class="nt">--data</span> <span class="s1">'{"order_items":[{"tracking_number":"Z6y2yDEZpoaFa6","weight":2.2},{"tracking_number":"aKgRgDZ6vnvug1","weight":1.1}],"tracking_number":"NKozBgz8gvqCoY", "has_battery": true}'</span>

</code></pre></div><h3 id='json'>json请求参数说明:</h3>
<table><thead>
<tr>
<th>名称</th>
<th>二级名称</th>
<th>类型</th>
<th>必填</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>tracking_number</td>
<td></td>
<td>string</td>
<td>是</td>
<td>合单物流单号，也就是logistics_order_code</td>
</tr>
<tr>
<td>has_battery</td>
<td></td>
<td>boolean</td>
<td>是</td>
<td>包裹是否带电</td>
</tr>
<tr>
<td>order_items</td>
<td></td>
<td>array</td>
<td>是</td>
<td>订单项列表</td>
</tr>
<tr>
<td></td>
<td>tracking_number</td>
<td>string</td>
<td>是</td>
<td>包裹面单号</td>
</tr>
<tr>
<td></td>
<td>weight</td>
<td>float</td>
<td>是</td>
<td>重量(Kg)</td>
</tr>
</tbody></table>

<blockquote>
<p>json结果</p>

<p>status code: 200</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NKozBgz8gvqCoY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"stamp_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://cdn.shoppo.com/temporary_uploaded_files/75dbe397d3564c1d9f4b46bff4db8da7.pdf"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tracking_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NKozBgz8gvqCoY"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='8ce1a08783'>返回参数说明:</h3>
<table><thead>
<tr>
<th>名称</th>
<th>二级名称</th>
<th>类型</th>
<th>必填</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td></td>
<td>object</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td></td>
<td>stamp_url</td>
<td>string</td>
<td>是</td>
<td>面单链接</td>
</tr>
<tr>
<td></td>
<td>tracking_number</td>
<td>string</td>
<td>是</td>
<td>合单物流单号</td>
</tr>
<tr>
<td></td>
<td>order_id</td>
<td>string</td>
<td>是</td>
<td>订单ID</td>
</tr>
</tbody></table>
<h2 id='f21caf117f'>推送物流轨迹</h2><h3 id='api-wise-logistics-checkpoints'><code>/api/wise/logistics/checkpoints</code></h3>
<ul>
<li><code>Wise</code> 调用 <code>Shoppo</code> 接口，推送物流轨迹信息</li>
<li>请求方式: <code>POST</code></li>
</ul>

<blockquote>
<p>curl请求</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>
<span class="nv">$ </span>curl https://graphql-dev.shoppo.com/api/wise/logistics/stamp <span class="nt">-H</span> <span class="s2">"Content-Type:application/json"</span> <span class="nt">-H</span> <span class="s2">"accesstoken: &lt;Your access token&gt;"</span> <span class="nt">-X</span> POST <span class="nt">--data</span> <span class="s1">'{"tracking_number":"xap36y3p85Oio0","checkpoints":[{"date":"2016-08-22 00:00:00","status_desc":"小件揽收","courier":"wise-express","status_number":1},{"date":"2016-08-23 00:00:00","status_desc":"小件入仓","courier":"wise-express","status_number":2}]}'</span>

</code></pre></div><h3 id='json-2'>json请求参数说明:</h3>
<table><thead>
<tr>
<th>名称</th>
<th>二级名称</th>
<th>类型</th>
<th>必填</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td></td>
<td>int</td>
<td>是</td>
<td>类型 1: 小件, 2: 合单</td>
</tr>
<tr>
<td>tracking_number</td>
<td></td>
<td>string</td>
<td>是</td>
<td>包裹物流单号</td>
</tr>
<tr>
<td>checkpoints</td>
<td></td>
<td>array</td>
<td>是</td>
<td>轨迹列表</td>
</tr>
<tr>
<td></td>
<td>status_number</td>
<td>int</td>
<td>是</td>
<td>状态码 1: 小件揽收, 2: 小件入仓, 3: 合单出仓, 4: 小件退货, 5: 退货签收</td>
</tr>
<tr>
<td></td>
<td>status_desc</td>
<td>string</td>
<td>否</td>
<td>状态说明</td>
</tr>
<tr>
<td></td>
<td>date</td>
<td>string</td>
<td>是</td>
<td>日期时间， 如 2016-08-22 00:00:00</td>
</tr>
<tr>
<td></td>
<td>remark</td>
<td>string</td>
<td>否</td>
<td>说明</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
      </div>
    </div>
    <script>
    $('.content p > img').attr('data-action', 'zoom');
    </script>
    <script src="javascripts/zoom.js"></script>
  </body>
</html>
